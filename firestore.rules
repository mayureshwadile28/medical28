/**
 * @fileoverview Firestore Security Rules for a medicine inventory and sales tracking application.
 *
 * Core Philosophy:
 * This ruleset allows open read and write access to all data, including medicines, sales records, and sale items.
 * This is because the application persists data locally and does not currently implement user-based authentication beyond anonymous access.
 * The structure is designed to easily accommodate future integration with user-based authentication.
 *
 * Data Structure:
 * - /medicines/{medicineId}: Stores individual medicine documents.
 * - /sales/{saleRecordId}: Stores individual sale record documents.
 * - /sales/{saleRecordId}/saleItems/{saleItemId}: Stores sale item documents associated with a specific sale record.
 *
 * Key Security Decisions:
 * - No user-based access control is enforced.
 * - All read and write operations are allowed for all users.
 *
 * Denormalization for Authorization:
 * - No denormalization is used as authorization is not based on user roles or ownership.
 *
 * Structural Segregation:
 * - Different data types (medicines, sales records, sale items) are stored in separate collections or subcollections.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows open read and write access to all medicines.
     * @path /medicines/{medicineId}
     * @allow (get, list) Anyone can read medicine data.
     * @allow (create, update, delete) Anyone can create, update, or delete medicine data.
     * @deny None. All operations are allowed.
     * @principle Open access for prototyping.
     */
    match /medicines/{medicineId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows open read and write access to all sales records.
     * @path /sales/{saleRecordId}
     * @allow (get, list) Anyone can read sale record data.
     * @allow (create, update, delete) Anyone can create, update, or delete sale record data.
     * @deny None. All operations are allowed.
     * @principle Open access for prototyping.
     */
    match /sales/{saleRecordId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows open read and write access to all sale items within a specific sale record.
     * @path /sales/{saleRecordId}/saleItems/{saleItemId}
     * @allow (get, list) Anyone can read sale item data.
     * @allow (create, update, delete) Anyone can create, update, or delete sale item data.
     * @deny None. All operations are allowed.
     * @principle Open access for prototyping.
     */
    match /sales/{saleRecordId}/saleItems/{saleItemId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}